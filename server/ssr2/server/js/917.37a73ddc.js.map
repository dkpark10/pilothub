{"version":3,"file":"js/917.37a73ddc.js","mappings":"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","sources":["webpack://hub3/./src/components/page/Hub.vue?960a","webpack://hub3/./src/components/page/Hub.vue?b083","webpack://hub3/./src/hooks/useintersection.ts","webpack://hub3/./src/components/page/Hub.vue?4145","webpack://hub3/./src/components/page/Hub.vue?327d","webpack://hub3/./src/components/page/Hub.vue?fe92","webpack://hub3/./src/components/page/Hub.vue?f7c4","webpack://hub3/./src/components/page/Hub.vue"],"sourcesContent":["import { resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode } from \"vue\"\nimport { ssrRenderComponent as _ssrRenderComponent, ssrRenderList as _ssrRenderList } from \"vue/server-renderer\"\n\nexport function ssrRender(_ctx: any,_push: any,_parent: any,_attrs: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_Header = _resolveComponent(\"Header\")!\n  const _component_router_link = _resolveComponent(\"router-link\")!\n  const _component_TagContentCard = _resolveComponent(\"TagContentCard\")!\n  const _component_Footer = _resolveComponent(\"Footer\")!\n\n  _push(`<!--[-->`)\n  _push(_ssrRenderComponent(_component_Header, null, null, _parent))\n  _push(`<main><div class=\"tag_content_wrapper\"><div class=\"tag_content\"><!--[-->`)\n  _ssrRenderList(_ctx.shwonItem, (item, idx) => {\n    _push(`<ul>`)\n    _push(_ssrRenderComponent(_component_router_link, {\n      to: `post/${item.postId}`\n    }, {\n      default: _withCtx((_, _push, _parent, _scopeId) => {\n        if (_push) {\n          _push(`<li${_scopeId}>`)\n          _push(_ssrRenderComponent(_component_TagContentCard, {\n            imgUrl: item.imgUrl,\n            title: item.title,\n            author: item.author,\n            webkitLineClamp: 2\n          }, null, _parent, _scopeId))\n          _push(`</li>`)\n        } else {\n          return [\n            _createVNode(\"li\", null, [\n              _createVNode(_component_TagContentCard, {\n                imgUrl: item.imgUrl,\n                title: item.title,\n                author: item.author,\n                webkitLineClamp: 2\n              }, null, 8, [\"imgUrl\", \"title\", \"author\"])\n            ])\n          ]\n        }\n      }),\n      _: 2\n    }, _parent))\n    _push(`</ul>`)\n  })\n  _push(`<!--]--></div><div class=\"target\"></div></div></main>`)\n  _push(_ssrRenderComponent(_component_Footer, null, null, _parent))\n  _push(`<!--]-->`)\n}","export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[2]!../../../node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[4]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./Hub.vue?vue&type=template&id=0dfeafc1&ts=true\"","type P = IntersectionObserverInit;\r\ntype R = IntersectionObserver;\r\n\r\nexport const useIntersection = (cb: () => void, option?: P): R => {\r\n  const intersectionHandler = (\r\n    [entry]: IntersectionObserverEntry[],\r\n    intersec: IntersectionObserver\r\n  ) => {\r\n    if (entry.isIntersecting) {\r\n      intersec.unobserve(entry.target);\r\n      cb();\r\n      intersec.observe(entry.target);\r\n    }\r\n  };\r\n\r\n  return new IntersectionObserver(intersectionHandler, option);\r\n};\r\n","\r\nimport axios from \"axios\";\r\nimport { defineComponent, onMounted, onUnmounted, watch, ref, Ref } from \"vue\";\r\nimport { useRoute } from \"vue-router\";\r\nimport Header from \"@/components/organisms/Header.vue\";\r\nimport TagContentCard from \"@/components/molecules/TagContentCard.vue\";\r\nimport Footer from \"@/components/organisms/Footer.vue\";\r\nimport { useIntersection } from \"@/hooks/useintersection\";\r\nimport { useScroll } from \"@/hooks/usescroll\";\r\nimport { PostItem } from \"custom-type\";\r\n\r\ninterface Status {\r\n  shwonItem: Ref<PostItem[]>;\r\n  targetRef: Ref<Element | undefined>;\r\n  countOfFetchData: number;\r\n  beginIndexofFetchData: number;\r\n}\r\n\r\nexport default defineComponent({\r\n  name: \"app\",\r\n  components: {\r\n    Header,\r\n    TagContentCard,\r\n    Footer,\r\n  },\r\n  setup(): Status {\r\n    const route = useRoute();\r\n    let beginIndexofFetchData = 0;\r\n    let category = route.params.category;\r\n    let totalItem: PostItem[] = [];\r\n\r\n    const countOfFetchData = 8;\r\n    const targetRef = ref<Element>();\r\n\r\n    const shwonItem = ref<PostItem[]>([]);\r\n    const itemLength = 72;\r\n\r\n    const fetchData = async () => {\r\n      const { data } = await axios.get<PostItem[]>(\r\n        `http://localhost:3000/${category}`\r\n      );\r\n      beginIndexofFetchData = 0;\r\n      totalItem = data;\r\n      shwonItem.value = totalItem.slice(0, 8);\r\n    };\r\n\r\n    watch(\r\n      () => route.params.category,\r\n      async (newParam) => {\r\n        category = newParam;\r\n        window.scrollTo(0, 0);\r\n        fetchData();\r\n      }\r\n    );\r\n\r\n    const getMoreData = () => {\r\n      if (shwonItem.value.length >= itemLength) {\r\n        return;\r\n      }\r\n\r\n      beginIndexofFetchData += countOfFetchData;\r\n      shwonItem.value = [\r\n        ...shwonItem.value,\r\n        ...totalItem.slice(\r\n          beginIndexofFetchData,\r\n          beginIndexofFetchData + countOfFetchData\r\n        ),\r\n      ];\r\n    };\r\n\r\n    const observer = useIntersection(getMoreData, {\r\n      threshold: 0.45,\r\n    });\r\n\r\n    // useScroll(getMoreData);\r\n\r\n    onMounted(() => {\r\n      fetchData();\r\n      observer.observe(targetRef.value as Element);\r\n    });\r\n\r\n    onUnmounted(() => {\r\n      if (targetRef.value) {\r\n        observer.unobserve(targetRef.value as Element);\r\n      }\r\n    });\r\n\r\n    return {\r\n      shwonItem,\r\n      targetRef,\r\n      countOfFetchData,\r\n      beginIndexofFetchData,\r\n    };\r\n  },\r\n});\r\n","export { default } from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[2]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./Hub.vue?vue&type=script&lang=ts\"; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[2]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./Hub.vue?vue&type=script&lang=ts\"","// extracted by mini-css-extract-plugin\nexport {};","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-22.use[0]!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-22.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-22.use[2]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-22.use[3]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./Hub.vue?vue&type=style&index=0&id=0dfeafc1&lang=scss\"","import { ssrRender } from \"./Hub.vue?vue&type=template&id=0dfeafc1&ts=true\"\nimport script from \"./Hub.vue?vue&type=script&lang=ts\"\nexport * from \"./Hub.vue?vue&type=script&lang=ts\"\n\nimport \"./Hub.vue?vue&type=style&index=0&id=0dfeafc1&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\ZUM\\\\Desktop\\\\pilot\\\\client\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['ssrRender',ssrRender]])\n\nexport default __exports__"],"names":["resolveComponent","_resolveComponent","withCtx","_withCtx","createVNode","_createVNode","ssrRenderComponent","_ssrRenderComponent","ssrRenderList","_ssrRenderList","ssrRender","_ctx","_push","_parent","_attrs","$props","$setup","$data","$options","_component_Header","_component_router_link","_component_TagContentCard","_component_Footer","shwonItem","item","idx","to","postId","default","_","_scopeId","imgUrl","title","author","webkitLineClamp","useIntersection","cb","option","intersectionHandler","entry","intersec","isIntersecting","unobserve","target","observe","IntersectionObserver","axios","defineComponent","onMounted","onUnmounted","watch","ref","useRoute","Header","TagContentCard","Footer","name","components","setup","route","beginIndexofFetchData","category","params","totalItem","countOfFetchData","targetRef","itemLength","fetchData","__awaiter","data","get","value","slice","newParam","window","scrollTo","getMoreData","length","observer","threshold"],"sourceRoot":""}