{"version":3,"file":"js/917.15742d4f.js","mappings":"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","sources":["webpack://hub3/./src/components/page/Hub.vue?960a","webpack://hub3/./src/hooks/useintersection.ts","webpack://hub3/./src/components/page/Hub.vue?4145","webpack://hub3/./src/components/page/Hub.vue"],"sourcesContent":["import { resolveComponent as _resolveComponent, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createElementVNode as _createElementVNode, withCtx as _withCtx } from \"vue\"\n\nconst _hoisted_1 = { class: \"tag_content_wrapper\" }\nconst _hoisted_2 = { class: \"tag_content\" }\nconst _hoisted_3 = {\n  class: \"target\",\n  ref: \"targetRef\"\n}\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_Header = _resolveComponent(\"Header\")!\n  const _component_TagContentCard = _resolveComponent(\"TagContentCard\")!\n  const _component_router_link = _resolveComponent(\"router-link\")!\n  const _component_Footer = _resolveComponent(\"Footer\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createVNode(_component_Header),\n    _createElementVNode(\"main\", null, [\n      _createElementVNode(\"div\", _hoisted_1, [\n        _createElementVNode(\"div\", _hoisted_2, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.shwonItem, (item, idx) => {\n            return (_openBlock(), _createElementBlock(\"ul\", { key: idx }, [\n              _createVNode(_component_router_link, {\n                to: `post/${item.postId}`\n              }, {\n                default: _withCtx(() => [\n                  _createElementVNode(\"li\", null, [\n                    _createVNode(_component_TagContentCard, {\n                      imgUrl: item.imgUrl,\n                      title: item.title,\n                      author: item.author,\n                      webkitLineClamp: 2\n                    }, null, 8, [\"imgUrl\", \"title\", \"author\"])\n                  ])\n                ]),\n                _: 2\n              }, 1032, [\"to\"])\n            ]))\n          }), 128))\n        ]),\n        _createElementVNode(\"div\", _hoisted_3, null, 512)\n      ])\n    ]),\n    _createVNode(_component_Footer)\n  ], 64))\n}","type P = IntersectionObserverInit;\r\ntype R = IntersectionObserver;\r\n\r\nexport const useIntersection = (cb: () => void, option?: P): R => {\r\n  const intersectionHandler = (\r\n    [entry]: IntersectionObserverEntry[],\r\n    intersec: IntersectionObserver\r\n  ) => {\r\n    if (entry.isIntersecting) {\r\n      intersec.unobserve(entry.target);\r\n      cb();\r\n      intersec.observe(entry.target);\r\n    }\r\n  };\r\n\r\n  return new IntersectionObserver(intersectionHandler, option);\r\n};\r\n","\r\nimport axios from \"axios\";\r\nimport { defineComponent, onMounted, onUnmounted, watch, ref, Ref } from \"vue\";\r\nimport { useRoute } from \"vue-router\";\r\nimport Header from \"@/components/organisms/Header.vue\";\r\nimport TagContentCard from \"@/components/molecules/TagContentCard.vue\";\r\nimport Footer from \"@/components/organisms/Footer.vue\";\r\nimport { useIntersection } from \"@/hooks/useintersection\";\r\nimport { useScroll } from \"@/hooks/usescroll\";\r\nimport { PostItem } from \"custom-type\";\r\n\r\ninterface Status {\r\n  shwonItem: Ref<PostItem[]>;\r\n  targetRef: Ref<Element | undefined>;\r\n  countOfFetchData: number;\r\n  beginIndexofFetchData: number;\r\n}\r\n\r\nexport default defineComponent({\r\n  name: \"app\",\r\n  components: {\r\n    Header,\r\n    TagContentCard,\r\n    Footer,\r\n  },\r\n  setup(): Status {\r\n    const route = useRoute();\r\n    let beginIndexofFetchData = 0;\r\n    let category = route.params.category;\r\n    let totalItem: PostItem[] = [];\r\n\r\n    const countOfFetchData = 8;\r\n    const targetRef = ref<Element>();\r\n\r\n    const shwonItem = ref<PostItem[]>([]);\r\n    const itemLength = 72;\r\n\r\n    const fetchData = async () => {\r\n      const { data } = await axios.get<PostItem[]>(\r\n        `http://localhost:3000/${category}`\r\n      );\r\n      beginIndexofFetchData = 0;\r\n      totalItem = data;\r\n      shwonItem.value = totalItem.slice(0, 8);\r\n    };\r\n\r\n    watch(\r\n      () => route.params.category,\r\n      async (newParam) => {\r\n        category = newParam;\r\n        window.scrollTo(0, 0);\r\n        fetchData();\r\n      }\r\n    );\r\n\r\n    const getMoreData = () => {\r\n      if (shwonItem.value.length >= itemLength) {\r\n        return;\r\n      }\r\n\r\n      beginIndexofFetchData += countOfFetchData;\r\n      shwonItem.value = [\r\n        ...shwonItem.value,\r\n        ...totalItem.slice(\r\n          beginIndexofFetchData,\r\n          beginIndexofFetchData + countOfFetchData\r\n        ),\r\n      ];\r\n    };\r\n\r\n    const observer = useIntersection(getMoreData, {\r\n      threshold: 0.45,\r\n    });\r\n\r\n    // useScroll(getMoreData);\r\n\r\n    onMounted(() => {\r\n      fetchData();\r\n      observer.observe(targetRef.value as Element);\r\n    });\r\n\r\n    onUnmounted(() => {\r\n      if (targetRef.value) {\r\n        observer.unobserve(targetRef.value as Element);\r\n      }\r\n    });\r\n\r\n    return {\r\n      shwonItem,\r\n      targetRef,\r\n      countOfFetchData,\r\n      beginIndexofFetchData,\r\n    };\r\n  },\r\n});\r\n","import { render } from \"./Hub.vue?vue&type=template&id=0dfeafc1&ts=true\"\nimport script from \"./Hub.vue?vue&type=script&lang=ts\"\nexport * from \"./Hub.vue?vue&type=script&lang=ts\"\n\nimport \"./Hub.vue?vue&type=style&index=0&id=0dfeafc1&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\ZUM\\\\Desktop\\\\pilot\\\\client\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_hoisted_1","class","_hoisted_2","_hoisted_3","ref","render","_ctx","_cache","$props","$setup","$data","$options","_component_Header","_resolveComponent","_component_TagContentCard","_component_router_link","_component_Footer","_openBlock","_createElementBlock","_Fragment","_createVNode","_createElementVNode","_renderList","shwonItem","item","idx","key","to","postId","default","_withCtx","imgUrl","title","author","webkitLineClamp","_","useIntersection","cb","option","intersectionHandler","entry","intersec","isIntersecting","unobserve","target","observe","IntersectionObserver","defineComponent","name","components","Header","TagContentCard","Footer","setup","route","useRoute","beginIndexofFetchData","category","params","totalItem","countOfFetchData","targetRef","itemLength","fetchData","__awaiter","data","axios","value","slice","watch","newParam","window","scrollTo","getMoreData","length","observer","threshold","onMounted","onUnmounted","__exports__"],"sourceRoot":""}